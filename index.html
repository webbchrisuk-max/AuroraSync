<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíé Monzo Aurora v1.5 ‚Äì Live Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: "Orbitron", sans-serif;
  background: radial-gradient(circle at top right, #05010f 0%, #0d0320 70%);
  color: #fff;
  text-shadow: 0 0 10px #00ffff;
  overflow-x: hidden;
  min-height: 100vh;
}
h1 {
  text-align: center;
  color: #4de0ff;
  text-shadow: 0 0 15px #4de0ff;
  margin-top: 25px;
}
section {
  max-width: 800px;
  margin: 20px auto;
  padding: 20px;
  border-radius: 12px;
  background: rgba(20,20,40,0.4);
  border: 1px solid rgba(0,255,255,0.2);
  box-shadow: 0 0 20px rgba(0,255,255,0.2);
}
h2 {
  color: #4de0ff;
  text-shadow: 0 0 10px #4de0ff;
  border-bottom: 1px solid rgba(0,255,255,0.3);
  padding-bottom: 10px;
}
.progress {
  height: 8px;
  background: rgba(255,255,255,0.1);
  border-radius: 4px;
  overflow: hidden;
  margin-top: 5px;
}
.progress span {
  display: block;
  height: 100%;
  background: linear-gradient(90deg, #00c6ff, #ff2e63);
  box-shadow: 0 0 10px #00c6ff;
}
footer {
  text-align: center;
  color: #4de0ff;
  font-size: 0.8rem;
  margin-top: 30px;
}
</style>
</head>

<body>
  <h1>üíé Monzo Aurora v1.5 ‚Äì Live Dashboard</h1>
  <p style="text-align:center; color:#aaa;">Coventry Sky Blue √ó Monzo Coral ¬∑ Live Sync Mode</p>

  <section id="main">
    <h2>Main Account</h2>
    <div id="mainContent">‚ö†Ô∏è Unable to load live data.</div>
  </section>

  <section id="pots">
    <h2>Pots Overview</h2>
    <div id="potsContent">Loading pots...</div>
  </section>

  <section id="transactions">
    <h2>Recent Transactions</h2>
    <div id="transactionsContent">Loading transactions...</div>
  </section>

  <footer>Coventry Sky Blue √ó Monzo Coral Theme ¬∑ Aurora Live v1.5</footer>

  <script>
  console.log("üöÄ Aurora Dashboard initialising...");

  const auroraURL = "https://webbchrisuk-max.github.io/AuroraSync/Monzo_Aurora.json";
  const transactionsURL = "https://webbchrisuk-max.github.io/AuroraSync/Monzo_Transactions.json";

  // === Fetch main Aurora JSON ===
  fetch(auroraURL)
    .then(res => {
      if (!res.ok) throw new Error("Aurora JSON not found: " + res.status);
      return res.json();
    })
    .then(data => {
      console.log("‚úÖ Aurora JSON loaded:", data);
      renderMain(data);
      renderPots(data.pots);
    })
    .catch(err => {
      console.error("‚ö†Ô∏è Error loading Aurora JSON:", err);
      document.getElementById("mainContent").innerHTML = "‚ö†Ô∏è Unable to load live data.";
    });

  // === Fetch Transactions JSON ===
  fetch(transactionsURL)
    .then(res => {
      if (!res.ok) throw new Error("Transactions JSON not found: " + res.status);
      return res.json();
    })
    .then(data => {
      console.log("üí≥ Transactions JSON loaded:", data);
      renderTransactions(data);
    })
    .catch(err => {
      console.warn("‚ö†Ô∏è Could not load transactions JSON:", err);
      document.getElementById("transactionsContent").innerHTML = "No transactions found.";
    });

  // === Render Functions ===
  function renderMain(data) {
    const el = document.getElementById("mainContent");
    el.innerHTML = `
      <h3 style="font-size:2em;color:#fff;">¬£${data.main_balance.toFixed(2)}</h3>
      <p>Flex Balance: ¬£${data.flex_balance.toFixed(2)}<br>
      Weekly Allowance: ¬£${data.weekly_allowance.toFixed(2)}<br>
      Daily Allowance: ¬£${data.daily_allowance.toFixed(2)}<br>
      Next Payday: ${data.next_payday}</p>
    `;
  }

  function renderPots(pots) {
    const el = document.getElementById("potsContent");
    el.innerHTML = "";
    for (const [name, pot] of Object.entries(pots)) {
      if (name === "Direct Debits" && pot.items) {
        let list = pot.items.map(i => `
          <li>${i.name} ‚Äì ¬£${i.amount.toFixed(2)} (${i.status})</li>
        `).join("");
        el.innerHTML += `<div><strong>${name}</strong><ul>${list}</ul></div>`;
      } else {
        const progress = pot.target > 0 ? (pot.current / pot.target) * 100 : 0;
        el.innerHTML += `
          <div>
            <strong>${name}</strong> ¬£${pot.current.toFixed(2)} / ¬£${pot.target.toFixed(2)}
            <div class="progress"><span style="width:${progress}%;"></span></div>
          </div>
        `;
      }
    }
  }

  function renderTransactions(data) {
    const el = document.getElementById("transactionsContent");
    el.innerHTML = data.transactions.map(t => `
      <div>${t.date} ‚Äì ${t.merchant} <span style="float:right;">¬£${t.amount.toFixed(2)}</span></div>
    `).join("");
  }
  </script>
</body>
</html>